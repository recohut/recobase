schema: '2.0'
stages:
  preprocess_dialogs:
    cmd: python src/preprocess_dialogs.py
    deps:
    - path: data/bronze/dialog_data/unparsed_train_data.txt
      md5: 71d9b7bff648b86497ef13dce228c7b1
      size: 22974034
    - path: src/preprocess_dialogs.py
      md5: 354e8f031464985d27498f991997a90e
      size: 2438
    outs:
    - path: data/silver/dialog_data/parsed_dialogs
      md5: 9ac57e1504cb8e59b658b5752be17765.dir
      size: 5676104
      nfiles: 1
  prepare_sentences:
    cmd: python src/prepare_sentences.py
    deps:
    - path: data/silver/dialog_data/parsed_dialogs/training_data_parsed_con.txt
      md5: 149861e1aa2881884e03592a0ad0a929
      size: 5676104
    - path: src/prepare_sentences.py
      md5: d7f4dbfd522ddda3630b8c4808f22afd
      size: 4925
    outs:
    - path: data/gold/dialog_data/dialog_sentences
      md5: d857d49bb7ac0e5c986bd84850cd5c51.dir
      size: 142947
=======
  preprocess:
    cmd: python src/preprocess.py
    deps:
    - path: data/bronze/ml-1m/ratings.dat
      md5: a89aa3591bc97d6d4e0c89459ff39362
      size: 24594131
    - path: src/preprocess.py
      md5: 48abc2aaab2b0486877240fd0bcabe47
      size: 4565
    outs:
    - path: data/silver/ml-1m
      md5: 06676bf10661c9f231027a2ca0715450.dir
      size: 3167132
      nfiles: 1
  negative_sampling:
    cmd: python src/negative_sampling.py
    deps:
    - path: data/silver/ml-1m/dataset.pkl
      md5: 8562c4ea047f847a78a46ab3dce58bcd
      size: 3167132
    - path: src/negative_sampling.py
      md5: b5787afa5eb1999fa86d66732cf53afe
      size: 5866
    outs:
    - path: data/gold/ml-1m/negative_samples
      md5: 88fee17715b501f9e3580d9031307e38.dir
      size: 25489851
      nfiles: 1
  data_loading:
    cmd: python src/data_loading.py
    deps:
    - path: data/gold/ml-1m/negative_samples/negative_samples_val.pkl
      md5: 930ae55228423ad7072cdf931fbe6997
      size: 25489851
    - path: data/silver/ml-1m/dataset.pkl
      md5: 8562c4ea047f847a78a46ab3dce58bcd
      size: 3167132
    - path: src/data_loading.py
      md5: 4814547aa21f5c451434f9959bfff870
      size: 9863
    outs:
    - path: data/gold/ml-1m/dataloaders
      md5: 9e1bf04a06c75667177a74cff3efc998.dir
      size: 85417869
      nfiles: 3
